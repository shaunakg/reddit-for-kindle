<!DOCTYPE html>

<head>

    <title>Reddit For Kindle - Simplify reddit pages for your ereader</title>
    <link rel="stylesheet" href="stylesheet.css">

</head>

<body>

<div id="errordisplay">
    <span id="errortext"></span> <span id="errorgoaway">❌</span>
</div>

<form action="simplify.html" method="GET" class="url-form">

    <input type="text" class="url-enter-field" name="url" id="url" placeholder="reddit url to simplify" required>
    <input type="submit" class="url-submit" value="Go!"><br><br>
    <center><a id="bookmark-button" href='javascript:window.location.replace("https://redditforkindle.herokuapp.com/simplify.html?url="+window.location.href);'>Auto-simplify bookmark</a></center>

</form>

<center><a href="https://github.com/shaunakg/reddit-for-kindle" target="_blank" rel="noopener"><span class="bottom-bar">Made with ❤️ by @shaunakg under the MIT License</span></a></center>

</body>

<script>

document.querySelector("#bookmark-button").addEventListener("click", function(event) {
    alert("Drag this to your bookmarks bar to have a button that will automatically simplify any reddit pages when you click it.");
    event.preventDefault();
}, false);

const urlParams = new URLSearchParams(window.location.search);
const errorParam = urlParams.get('error');
const errorDisplay = document.getElementById("errordisplay");
const errorText = document.getElementById("errortext");
const errorGo = document.getElementById('errorgoaway');

if (errorParam == "error_json_parse") {
    errorText.innerText = "Sorry, we couldn't retrieve information from that URL.";
    errorDisplay.style.display = "unset";
} else if (errorParam == "not_reddit") {
    errorText.innerText = "Sorry, that isn't an official reddit link.";
    errorDisplay.style.display = "unset";
} else {
    errorDisplay.style.display = "none";
}

errorGo.onclick = function () {
    errorDisplay.style.display = "none";
}

</script>